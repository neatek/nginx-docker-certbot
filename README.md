# Полезные скрипты

Этот репозиторий содержит скрипты для автоматической установки Nginx, Certbot через Snap и Docker на Ubuntu. Скрипты также настраивают Nginx для использования Certbot и настраивают автоматическое обновление сертификатов.

## Содержание

- [Требования](#требования)
- [Инструкции по установке](#инструкции-по-установке)
- [Функции скриптов](#функции-скриптов)
- [Описание второго скрипта](#описание-второго-скрипта)

## Требования

Для запуска этих скриптов требуются привилегии суперпользователя (sudo).

## Инструкции по установке

Чтобы установить и настроить Nginx, Certbot и Docker, выполните следующие шаги:

1. Скачайте и запустите оба скрипта последовательно с помощью одной команды, заменив `example.com` на ваше действительное доменное имя:

    ```bash
    sudo bash -c "$(curl -fsSL https://raw.githubusercontent.com/neatek/nginx-docker-certbot/main/install.sh) && \
    curl -fsSL https://raw.githubusercontent.com/neatek/nginx-docker-certbot/main/setup_domain.sh | sudo bash -s -- example.com"
    ```

    Это установит Nginx, Certbot и Docker, настроит Nginx с Certbot и получит SSL-сертификат для указанного домена.

## Функции скриптов

1. Обновляет список пакетов.
2. Устанавливает Nginx и Snapd.
3. Запускает Nginx и настраивает его на автозапуск.
4. Устанавливает Certbot через Snap.
5. Создает символическую ссылку для Certbot.
6. Настраивает автоматическую проверку обновления сертификатов.
7. Устанавливает Docker и его зависимости.
8. Добавляет официальный ключ GPG Docker и настраивает репозиторий Docker.
9. Устанавливает Docker Engine и необходимые компоненты.
10. Запускает Docker и настраивает его на автозапуск.

## Примечания

- Убедитесь, что у вас есть настроенное доменное имя, указывающее на ваш сервер, чтобы Certbot мог получить SSL-сертификат.
- Скрипт проверяет автоматическое обновление сертификатов с помощью команды `certbot renew --dry-run`.

Если у вас возникли проблемы с установкой или у вас есть вопросы, обратитесь к документации соответствующих инструментов:

- [Nginx](https://nginx.org/en/docs/)
- [Certbot](https://certbot.eff.org/docs/)
- [Docker](https://docs.docker.com/)

## Описание второго скрипта

Этот скрипт добавляет конфигурацию домена в Nginx и запускает Certbot для получения SSL-сертификата для указанного домена.

### Инструкции по установке

1. Скачайте и запустите второй скрипт с помощью одной команды:

    ```bash
    sudo bash -c "$(curl -fsSL https://raw.githubusercontent.com/neatek/nginx-docker-certbot/main/setup_domain.sh)"
    ```

### Функции скрипта

1. Предлагает пользователю ввести доменное имя.
2. Добавляет конфигурацию для указанного домена в файл `/etc/nginx/sites-available/default`.
3. Создает каталог для домена и добавляет образец файла `index.html`.
4. Проверяет конфигурацию Nginx и перезагружает ее.
5. Запускает Certbot для получения SSL-сертификата для указанного домена.
6. Проверяет автоматическое обновление сертификатов.

Этот скрипт упрощает настройку Nginx и SSL-сертификатов для вашего домена, добавляя необходимую конфигурацию и автоматически настраивая Certbot для работы с Nginx.
